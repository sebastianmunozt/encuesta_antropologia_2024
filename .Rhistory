# voy a recodificar los nombres, para ello hago lo siguiente
# hago un listado de los nombres
valores_unicos_a<- sort(unique(base_antropologia$n_encuestador), decreasing = F)
#imprimo los valores ordenados, para verlos, copiarlos y recodificarlos.
print(valores_unicos_descendentes)
#hago un proceso de recodificación: por ejemplo con Alejandra Mondaca, Alonso silva y Amanda Baez (SEGUIR!)
base_antropologia <- base_antropologia %>%
mutate(n_encuestador=case_when(n_encuestador=="carla_(buffy)" ~ "Alejandra Mondaca",
n_encuestador=="alexi" ~ "Alejandra Mondaca",
n_encuestador=="alejandra_mondaca" ~ "Alejandra Mondaca",
n_encuestador=="alejandra_mondaca_" ~ "Alejandra Mondaca",
n_encuestador=="alonso_silva" ~ "Alonso Silva",
n_encuestador=="alonso_silva_" ~ "Alonso Silva",
n_encuestador=="amanda_baez" ~ "Amanda Baez",
n_encuestador=="amanda_baez_" ~ "Amanda Baez",
n_encuestador=="antonia_ramirez_" ~ "Antonia Ramirez",
n_encuestador=="camila_crisostomo" ~ "Camila Crisostomo",
n_encuestador=="camila_segura" ~ "Camila Segura",
n_encuestador=="catalina_" ~ "Catalina Fuentes",
n_encuestador=="catalina_fuentes" ~ "Catalina Fuentes",
n_encuestador=="consuelo_llanten_" ~ "Consuelo Llanten",
n_encuestador=="consuelo_llanten" ~ "Consuelo Llanten",
n_encuestador=="alejandra_"~ "Daniela Pasmino",
n_encuestador=="daniela_berrios" ~ "Daniela Pasmino",
n_encuestador=="daniela_pasmino" ~ "Daniela Pasmino",
n_encuestador=="florencia_martin" ~"Florencia Martin",
n_encuestador=="florencia_martin_" ~ "Florencia Martin",
n_encuestador=="gabriel_concha" ~ "Gabriel Concha",
n_encuestador=="gabriel_concha_" ~ "Gabriel Concha",
n_encuestador=="gonzalo" ~ "Gonzalo Munoz",
n_encuestador=="gonzalo_" ~ "Gonzalo Munoz",
n_encuestador=="gonzalo_munoz" ~ "Gonzalo Munoz",
n_encuestador=="gonzalo_munoz_oliva_" ~ "Gonzalo Munoz",
n_encuestador=="isidora_aros" ~ "Isidora Aros",
n_encuestador=="isidora_aros_" ~ "Isidora Aros",
n_encuestador=="joaquin" ~ "Joaquin Castillo",
n_encuestador=="joaquin_" ~ "Joaquin Castillo",
n_encuestador=="joaquin_castillo" ~ "Joaquin Castillo",
n_encuestador=="yakim_" ~ "Joaquin Castillo",
n_encuestador=="javiera_herrera" ~ "Javiera Herrera",
n_encuestador=="joaquin_orellana_" ~ "Joaquin Orellana",
n_encuestador=="juan" ~ "Joaquin Orellana",
n_encuestador=="julia_sotomayor"~ "Julia Sotomayor",
n_encuestador=="elisa_monsalve_"~ "Julia Sotomayor",
n_encuestador=="escarleth_"~ "Julia Sotomayor",
n_encuestador=="franco" ~ "Julia Sotomayor",
n_encuestador== "krishna_asencio" ~ "Krishna Asencio",
n_encuestador== "krishna_asencio_" ~ "Krishna Asencio",
n_encuestador=="antonia_leiva" ~ "Mariana Perez",
n_encuestador=="mariana_perez" ~ "Mariana Perez",
n_encuestador=="mariana_perez_" ~ "Mariana Perez",
n_encuestador== "pablo_cornejo" ~ "Mariana Perez",
n_encuestador== "martin_campusano" ~ "Martin Campusano",
n_encuestador== "martin_cifuentes" ~ "Martin Cifuentes",
n_encuestador== "matilde_cespedes" ~ "Matilde Cespedes",
n_encuestador== "matilde_cespedes_" ~ "Matilde Cespedes",
n_encuestador== "antonia_" ~ "Noel Casas-Cordero",
n_encuestador== "noel_casas-cordero"~ "Noel Casas-Cordero",
n_encuestador== "oliver_delherbe" ~ "Oliver Delherbe",
n_encuestador== "olivier_delherbe" ~ "Oliver Delherbe",
n_encuestador== "patricia_gonzalez" ~ "Patricia Gonzalez",
n_encuestador== "patricia_gonzalez_" ~ "Patricia Gonzalez",
n_encuestador== "pedro_villaroel" ~ "Pedro Villaroel",
n_encuestador== "pedro_villarroel" ~ "Pedro Villaroel",
n_encuestador== "martina_" ~ "Pedro Villaroel",
n_encuestador== "samanta_letelier" ~ "Samanta Letelier",
n_encuestador== "samanta_letelier_" ~ "Samanta Letelier",
n_encuestador== "sofia_ballerino" ~ "Sofia Ballerino",
n_encuestador== "sofia_ballerino_" ~ "Sofia Ballerino",
n_encuestador== "valentina" ~ "Valentina Gonzalez",
n_encuestador== "valentina_gonzalez" ~ "Valentina Gonzalez",
n_encuestador== "valentina_gonzalez_" ~ "Valentina Gonzalez",
n_encuestador== "valeria_carvajal" ~ "Valeria Carvajal",
n_encuestador== "valeria_carvajal_donoso" ~ "Valeria Carvajal",
n_encuestador== "valeria_carvajal_" ~ "Valeria Carvajal",
n_encuestador== "josefina_ahuile_munoz" ~ "Valeria Carvajal",
n_encuestador== "farid_halaby" ~ "Valeria Carvajal",
n_encuestador== "venecia" ~ "Venecia Moreno",
n_encuestador== "venecia_moreno" ~ "Venecia Moreno",
n_encuestador== "veronica_moya" ~ "Veronica Moya",
n_encuestador== "veronica_moya_" ~ "Veronica Moya",
n_encuestador== "veronica_paz_moya_rosas" ~ "Veronica Moya",
n_encuestador== "victor" ~ "Victor Avalos",
n_encuestador== "victor_avalos" ~ "Victor Avalos",
n_encuestador== "ignacia_fica" ~ "Ricardo Quiroz",
n_encuestador== "vicente" ~ "Consuelo Llanten",
n_encuestador== "noel_casas_-cordero_y_samanta_letelier_" ~ "Amanda Baez",
n_encuestador== "benjamin_(iris)" ~ "Venecia Moreno",
TRUE ~ n_encuestador))
unique(base_antropologia$ea_10) # SEBASTIÁN
class(base_antropologia$ea_010)
class(base_antropologia$ea_010)
View(base_antropologia)
class(base_antropologia$ea_09)
unique(base_antropologia$ea_10) # SEBASTIÁN
class(base_antropologia$ea_010)
base_antropologia <- base_antropologia %>%
mutate(ea_10 = as.character(ea_10))
class(base_antropologia$ea_010)
ea_10
# ea_10_que_estrategias_utiliza_con_mayor_frecuencia_para_manejar_el_estres_academico_seleccione_todas_las_alternativas_que_correspondan_con_su_caso",
unique(base_antropologia$ea_10) # NOEL
unique(base_antropologia$ea_10) # SEBASTIÁN
class(base_antropologia$ea_10)
library(stringr)
# Utilizar str_extract_all para extraer respuestas que pueden contener comas dentro de paréntesis
ea_10_separada <- str_extract_all(base_antropologia$ea_10, "\\([^\\)]+\\)|[^,]+")[[1]]
ea_10_separada
# Utilizar str_extract_all para extraer respuestas que pueden contener comas dentro de paréntesis
ea_10_separada <- str_extract_all(base_antropologia$ea_10, "\\([^\\)]+\\)|[^,]+")[[1]]
ea_10_separada
unique(base_antropologia$ea_10)
# Utilizar str_extract_all para extraer respuestas que pueden contener comas dentro de paréntesis
ea_10_separada <- str_extract_all(base_antropologia$ea_10, "\\([^\\)]+\\)|[^,]+")[[1]]
ea_10_separada
unique(base_antropologia$ea_10)
# ea_04_en_el_ultimo_semestre_finalizado_aproximadamente_que_promedio_de_notas_ha_obtenido_considere_el_ultimo_semestre_finalizado_como_el_segundo_semestre_del_ano_2023",
unique(base_antropologia$ea_04) # recodificar a número, recodificar a rangos: MATIAS
unique(base_antropologia$ea_10)
base_antropologia <- base_antropologia %>%
mutate(ea_10 = case_when(
grepl("Participar en otras actividades creativas \\(música, arte, escritura\\)", ea_10) ~
gsub("Participar en otras actividades creativas \\(música, arte, escritura\\)",
"Participar en otras actividades creativas (música/arte/escritura)",
ea_10),
TRUE ~ ea_10
))
unique(base_antropologia$ea_10)
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- strsplit(base_antropologia$ea_10, ",") # separo las respuestas que tienen coma (,)
respuestas_ea_10
respuestas <- unlist(respuestas) #las unlisto, las saco de una lista
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
respuestas_ea_10
unique(respuestas)
unique(respuestas_ea_10)
#observo las respuestas
freq(respuestas_ea_10, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb()
#elimino espacio antes de primera letra
respuestas_ea_10_limpio <- trimws(respuestas_ea_10, which = "left")
respuestas_ea_10_limpio
respuestas_ea_10
#elimino espacio antes de primera letra
respuestas_ea_10_limpio <- trimws(respuestas_ea_10, which = "left")
respuestas_ea_10
#elimino espacio antes de primera letra
respuestas_ea_10_limpio <- trimws(respuestas_ea_10, which = "left")
respuestas_ea_10_limpio
# obtengo las frecuencias de mis preguntas de respuesta múltiple
freq(respuestas_ea_10_limpio, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb()
#Guardo para graficar
ea_10_graf <- freq(respuestas_ea_10_limpio, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb()
ea_10_graf
View(libro_codigos)
ea_10_tabla <- freq(respuestas_ea_10_limpio, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb() %>%
kable(col.names = c("Estrategias", "Frecuencia", "%", "% Acumulado"),
caption = "Estrategias del manejo del estres",
format = "html", digits = 2) %>%  #le doy formate con kable
kable_classic(full_width = F, html_font = "Cambria") %>%
save_kable(file = "outputs/ea_10_tabla.png", zoom = 3)
install.packages("kableExtra")
library(kableExtra)
ea_10_tabla <- freq(respuestas_ea_10_limpio, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb() %>%
kable(col.names = c("Estrategias", "Frecuencia", "%", "% Acumulado"),
caption = "Estrategias del manejo del estres",
format = "html", digits = 2) %>%  #le doy formate con kable
kable_classic(full_width = F, html_font = "Cambria") %>%
save_kable(file = "outputs/ea_10_tabla.png", zoom = 3)
ea_10_graf <-  ea_10_graf %>%
rename(Problema = value, Porcentaje= pct)
g_ea_10_graf <- ggplot(ea_10_graf, aes(x = Porcentaje, y = fct_reorder(Problema, Porcentaje), fill= Problema)) +
geom_col() +
labs(title = "Estrategias del manejo del estres",
subtitle = "según datos de Encuestas Estudiantes Antropología 2024",
x = "%",
y = "Estrategia") +
geom_text(data = ea_10_graf %>% filter(rank(-Porcentaje) <= 12), # Solo añadir texto a las primeras 8 categorías
aes(label = ifelse(rank(-Porcentaje) <= 12, paste0(round(Porcentaje, 1), "%"), "")),
hjust = 1, size = 3, nudge_x = -.9, fontface= "bold", color = "white") +
scale_fill_viridis_d(option = "C", guide = "none") +
theme_ipsum()
ggsave("outputs/g_ea_10_graf.png", plot = g_ea_10_graf, width = 10, height = 7, dpi = 300)
View(g_ea_10_graf)
unique(base_antropologia$ea_10)
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
respuestas_ea_10
respuestas_ea_10_limpio
base_antropologia <- base_antropologia %>%
mutate(ea_10 = case_when(
grepl("Participar en otras actividades creativas \\(música, arte, escritura\\)", ea_10) ~
gsub("Participar en otras actividades creativas \\(música, arte, escritura\\)",
"Participar en otras actividades creativas (música/arte/escritura)",
ea_10),
TRUE ~ ea_10
))
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
respuestas_ea_10
# Crear la nueva variable recodificada
base_antropologia$ea_10_recod <- ifelse(base_antropologia$ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental"
),
base_antropologia$ea_10,
"Otro"
)
unique(base_antropologia$ea_10)
unique(base_antropologia$ea_10_recod)
# Crear la nueva variable recodificada
base_antropologia$ea_10_recod <- ifelse(base_antropologia$ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental"),base_antropologia$ea_10, "Otro")
unique(base_antropologia$ea_10_recod)
# Contar la frecuencia de cada categoría en ea_10_recod
table(base_antropologia$ea_10_recod)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
grepl("Organización y planificación del tiempo", ea_10) |
grepl("Apoyo social \\(hablar con amigos/familia\\)", ea_10) |
grepl("Participar en otras actividades creativas \\(música/arte/escritura\\)", ea_10) |
grepl("Ejercicio físico", ea_10) |
grepl("Consulta con un profesional de salud mental", ea_10) ~ ea_10,
TRUE ~ "Otro"
))
View(base_antropologia)
unique(base_antropologia$ea_10_recod)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
grepl("Organización y planificación del tiempo", ea_10) |
grepl("Apoyo social \\(hablar con amigos/familia\\)", ea_10) |
grepl("Participar en otras actividades creativas \\(música/arte/escritura\\)", ea_10) |
grepl("Ejercicio físico", ea_10) |
grepl("Consulta con un profesional de salud mental", ea_10) ~ ea_10,
TRUE ~ "Otro"
))
unique(base_antropologia$ea_10_recod)
table(base_antropologia$ea_10_recod)
#hice la lista altiro
unique(respuestas_ea_10)
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
#hice la lista altiro
unique(respuestas_ea_10)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
str_detect(ea_10, "Organización y planificación del tiempo") |
str_detect(ea_10, "Apoyo social \\(hablar con amigos/familia\\)") |
str_detect(ea_10, "Participar en otras actividades creativas \\(música/arte/escritura\\)") |
str_detect(ea_10, "Ejercicio físico") |
str_detect(ea_10, "Consulta con un profesional de salud mental") ~ ea_10,
TRUE ~ "Otro"
))
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
str_detect(ea_10, "Organización y planificación del tiempo") |
str_detect(ea_10, "Apoyo social \\(hablar con amigos/familia\\)") |
str_detect(ea_10, "Participar en otras actividades creativas \\(música/arte/escritura\\)") |
str_detect(ea_10, "Ejercicio físico") |
str_detect(ea_10, "Consulta con un profesional de salud mental") ~ ea_10,
TRUE ~ "Otro"
))
ea_10_recod
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
str_detect(respuestas_ea_10, "Organización y planificación del tiempo") |
str_detect(respuestas_ea_10, "Apoyo social \\(hablar con amigos/familia\\)") |
str_detect(respuestas_ea_10, "Participar en otras actividades creativas \\(música/arte/escritura\\)") |
str_detect(respuestas_ea_10, "Ejercicio físico") |
str_detect(respuestas_ea_10, "Consulta con un profesional de salud mental") ~ respuestas_ea_10,
TRUE ~ "Otro"
))
ea_10_recod
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
str_detect(respuestas_ea_10, "Organización y planificación del tiempo") |
str_detect(respuestas_ea_10, "Apoyo social \\(hablar con amigos/familia\\)") |
str_detect(respuestas_ea_10, "Participar en otras actividades creativas \\(música/arte/escritura\\)") |
str_detect(respuestas_ea_10, "Ejercicio físico") |
str_detect(respuestas_ea_10, "Consulta con un profesional de salud mental") ~ respuestas_ea_10,
TRUE ~ "Otro"
))
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
respuestas_ea_10
#observo las respuestas
freq(respuestas_ea_10, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb()
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = ifelse(
str_detect(respuestas_ea_10, "Organización y planificación del tiempo"), "Organización y planificación del tiempo",
ifelse(str_detect(respuestas_ea_10, "Apoyo social \\(hablar con amigos/familia\\)"), "Apoyo social (hablar con amigos/familia)",
ifelse(str_detect(respuestas_ea_10, "Participar en otras actividades creativas \\(música/arte/escritura\\)"), "Participar en otras actividades creativas (música/arte/escritura)",
ifelse(str_detect(respuestas_ea_10, "Ejercicio físico"), "Ejercicio físico",
ifelse(str_detect(respuestas_ea_10, "Consulta con un profesional de salud mental"), "Consulta con un profesional de salud mental",
"Otro"))))))
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
grepl("Organización y planificación del tiempo", respuestas_ea_10) ~ "Organización y planificación del tiempo",
grepl("Apoyo social \\(hablar con amigos/familia\\)", respuestas_ea_10) ~ "Apoyo social (hablar con amigos/familia)",
grepl("Participar en otras actividades creativas \\(música/arte/escritura\\)", respuestas_ea_10) ~ "Participar en otras actividades creativas (música/arte/escritura)",
grepl("Ejercicio físico", respuestas_ea_10) ~ "Ejercicio físico",
grepl("Consulta con un profesional de salud mental", respuestas_ea_10) ~ "Consulta con un profesional de salud mental",
TRUE ~ "Otro"
))
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
respuestas_ea_10
table(respuestas_ea_10)
base_antropologia <- base_antropologia %>%
group_by(respuestas_ea_10) %>%
summarise(frecuencia = n()) %>%
mutate(respuestas_ea_10 = fct_lump_min(respuestas_ea_10, 1, w = frecuencia, other_level = "Otros"))
respuestas_ea_10 <- fct_lump_min(names(respuestas_ea_10), 1, w = df_respuestas, other_level = "Otros")
#observo las respuestas
freq(respuestas_ea_10, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb()
#elimino espacio antes de primera letra
respuestas_ea_10_limpio <- trimws(respuestas_ea_10, which = "left")
# obtengo las frecuencias de mis preguntas de respuesta múltiple
freq(respuestas_ea_10_limpio, prop=TRUE, order = "freq", report.nas = FALSE) %>%
tb()
table(respuestas_ea_10)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental"
) ~ ea_10,
TRUE ~ "Otro"
))
ea_10_recod
unique(ea_10_recod)
table(ea_10_recod)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental"
) ~ ea_10,
TRUE ~ "Otro"
))
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
unique(respuestas_ea_10)
table(respuestas_ea_10)
unique(respuestas_ea_10)
respuestas_ea_10
unique(respuestas_ea_10)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
) ~ ea_10,
TRUE ~ "Otro"
))
ea_10_recod
base_antropologia <- base_antropologia %>%
mutate(respuestas_ea_10 = unlist(strsplit(ea_10, ", ")),  # Crear respuestas_ea_10 temporalmente
ea_10_recod = case_when(
respuestas_ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
) ~ respuestas_ea_10,
TRUE ~ "Otro"
)) %>%
select(-respuestas_ea_10)
#separo las respuestas y creo un vector que las lista
respuestas_ea_10 <- unlist(strsplit(base_antropologia$ea_10, ", ")) # separo las respuestas que tienen coma (,)
respuestas_ea_10
unique(respuestas_ea_10)
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
respuestas_ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
) ~ respuestas_ea_10,
TRUE ~ "Otro"
))
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = case_when(
respuestas_ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
) ~ respuestas_ea_10,
TRUE ~ "Otro"
))
respuestas_ea_10 <- sapply(strsplit(base_antropologia$ea_10, ", "), function(respuestas) {
recod <- respuestas[respuestas %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
)]
if (length(recod) == 0) {
recod <- "Otro"
}
return(recod)
})
respuestas_ea_10
return(paste(respuestas[respuestas %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
)], collapse = ", "))
base_antropologia <- base_antropologia %>%
mutate(ea_10 = sapply(strsplit(ea_10, ", "), function(ea_10) {
if (any(ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
))) {
return(paste(ea_10[ea_10 %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
)], collapse = ", "))
} else {
return("Otro")
}
}))
View(base_antropologia)
base_antropologia <- base_antropologia %>%
mutate(ea_10 = case_when(
grepl("Participar en otras actividades creativas \\(música, arte, escritura\\)", ea_10) ~
gsub("Participar en otras actividades creativas \\(música, arte, escritura\\)",
"Participar en otras actividades creativas (música/arte/escritura)",
ea_10),
TRUE ~ ea_10
))
base_antropologia <- base_antropologia %>%
mutate(ea_10_recod = sapply(strsplit(ea_10, ", "), function(respuestas) {
if (any(respuestas %in% c(
"Técnicas de relajación (como de respiración o relajación muscular)",
"Organización y planificación del tiempo",
"Apoyo social (hablar con amigos/familia)",
"Participar en otras actividades creativas (música/arte/escritura)",
"Ejercicio físico",
"Consulta con un profesional de salud mental",
"Tomar descansos regulares"
))) {
# Si alguna de las respuestas está en las categorías específicas, mantener todas las respuestas
return(paste(respuestas, collapse = ", "))
} else {
# Si ninguna de las respuestas está en las categorías específicas, recodificar como "Otro"
return("Otro")
}
}))
View(base_antropologia)
View(base_antropologia)
View(base_antropologia)
View(base_antropologia)
